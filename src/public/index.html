<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Profile & Guestbook</title>
    <style>
        body { background-color: #1a1a1a; color: #ffffff; font-family: sans-serif; padding: 60px; }
        h1 { font-size: 3.5rem; font-weight: 800; margin-bottom: 40px; }
        .form-container { display: flex; align-items: flex-end; gap: 10px; border-bottom: 1px solid #333; padding-bottom: 30px; margin-bottom: 20px; }
        input, textarea { background: #2a2a2a; border: 1px solid #444; color: white; padding: 10px; border-radius: 4px; }
        #name { width: 150px; }
        #message { width: 300px; resize: none; }
        button { background: #000; color: #fff; border: 1px solid #444; padding: 12px 24px; cursor: pointer; font-weight: bold; border-radius: 6px; }
        button:hover { background: #333; }
        .post { margin-top: 15px; border-left: 3px solid #444; padding-left: 15px; padding-bottom: 10px; }
    </style>
</head>
<body>
    <h1>My Profile & Guestbook</h1>
    <div class="form-container">
        <input type="text" id="name" placeholder="Name">
        <textarea id="message" placeholder="Message" rows="1"></textarea>
        <button onclick="signGuestbook()">Sign Guestbook</button>
    </div>
    <div id="posts"></div>

    <script>
        async function loadPosts() {
            const res = await fetch('/guestbook');
            const data = await res.json();
            document.getElementById('posts').innerHTML = data.map(p => `
                <div class="post"><strong>${p.name}:</strong> ${p.message}</div>
            `).join('');
        }

        async function signGuestbook() {
            const name = document.getElementById('name').value;
            const message = document.getElementById('message').value;
            if(!name || !message) return;

            await fetch('/guestbook', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, message })
            });
            
            document.getElementById('name').value = '';
            document.getElementById('message').value = '';
            loadPosts();
        }
        loadPosts();
    </script>
</body>
</html>